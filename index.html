<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚öúÔ∏è Brazil Luxury Express Store | Melhores Ofertas</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* -----------------------------------
   1. GLOBAL STYLES & TYPOGRAPHY
   ----------------------------------- */
:root {
  --primary-bg: #1C1C1C; /* Deep Black */
  --secondary-bg: #282828; /* Slightly Lighter Black */
  --accent-color: #FFD700; /* Gold */
  --text-color: #F0F0F0; /* Light Gray for text */
}

body {
  margin: 0;
  font-family: 'Poppins', sans-serif; 
  background: var(--primary-bg);
  color: var(--text-color);
}

/* -----------------------------------
   2. HEADER / NAVIGATION BAR (Black & Gold)
   ----------------------------------- */
.header {
  background: var(--secondary-bg);
  padding: 15px 30px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.logo {
  font-size: 26px;
  font-weight: 700;
  color: var(--accent-color); 
  text-decoration: none;
}

.nav-links {
    display: flex;
    align-items: center;
}

.nav-links a {
  margin-left: 20px;
  color: var(--text-color);
  text-decoration: none;
  font-weight: 600;
  transition: color 0.3s;
}

.nav-links a:hover {
  color: var(--accent-color);
}

/* -----------------------------------
   3. DROPDOWN MENU (Categories)
   ----------------------------------- */
.dropdown {
  position: relative;
  display: inline-block;
  margin-left: 20px;
}

.dropbtn {
  background-color: transparent;
  color: var(--accent-color);
  padding: 10px 15px;
  font-size: 16px;
  font-weight: 600;
  border: 2px solid var(--accent-color);
  cursor: pointer;
  border-radius: 5px;
  transition: background-color 0.3s;
}

.dropbtn:hover {
  background-color: rgba(255, 215, 0, 0.1);
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: var(--secondary-bg);
  min-width: 180px;
  box-shadow: 0 8px 16px 0px rgba(0,0,0,0.6);
  z-index: 1;
  border-top: 3px solid var(--accent-color);
  border-radius: 0 0 5px 5px;
}

.dropdown-content a {
  color: var(--text-color) !important;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  transition: background-color 0.3s, color 0.3s;
  margin: 0; 
}

.dropdown-content a:hover {
  background-color: var(--accent-color);
  color: #111 !important; 
}

.dropdown:hover .dropdown-content {
  display: block;
}

/* -----------------------------------
   4. HERO SECTION
   ----------------------------------- */
.hero {
  background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://i.imgur.com/vKqYy3T.jpeg') center/cover no-repeat;
  height: 400px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
}

.hero h1 {
  font-size: 56px;
  margin: 0;
  font-weight: 700;
  color: var(--accent-color); 
  text-shadow: 0 4px 15px rgba(0, 0, 0, 0.7);
}

.hero p {
    font-size: 20px;
    margin-top: 10px;
    font-weight: 400;
}

/* -----------------------------------
   5. SECTIONS & TITLES
   ----------------------------------- */
.container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.section-title {
  font-size: 32px;
  margin: 40px 0 20px 0;
  font-weight: 700;
  border-left: 5px solid var(--accent-color);
  padding-left: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flash-timer {
  font-size: 24px;
  color: var(--accent-color);
  font-weight: 700;
  background: var(--secondary-bg);
  padding: 5px 10px;
  border-radius: 5px;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.products-row {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap; 
}

/* -----------------------------------
   6. PRODUCT CARD DESIGN
   ----------------------------------- */
.product-card {
  width: 300px; 
  background: var(--secondary-bg);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
  transition: transform 0.3s, box-shadow 0.3s;
  overflow: hidden;
  text-align: center;
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 30px rgba(255, 215, 0, 0.1);
}

.product-card img {
  width: 100%;
  height: 250px;
  border-radius: 8px;
  object-fit: cover;
  margin-bottom: 10px;
}

.product-card h3 {
    font-size: 18px;
    margin: 10px 0 5px 0;
    font-weight: 600;
    height: 40px;
    overflow: hidden;
}

.price-details {
    margin-bottom: 15px;
    min-height: 50px; 
}

.original-price {
    color: #999;
    text-decoration: line-through;
    font-size: 14px;
    display: block;
    margin-bottom: 3px;
}

.discount-price {
    color: var(--accent-color); 
    font-size: 24px;
    font-weight: 700;
}

.regular-price {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-color);
}

/* -----------------------------------
   7. BUTTONS
   ----------------------------------- */
.buy-btn {
  display: block;
  background: var(--accent-color); 
  padding: 12px 20px;
  color: #111; 
  text-align: center;
  border-radius: 50px;
  text-decoration: none;
  margin-top: 10px;
  font-weight: 700;
  transition: background 0.3s;
  border: none;
}

.buy-btn:hover {
  background: #EEDD82; 
}

.best-btn {
  background: #333 !important; 
  color: var(--accent-color) !important;
  border: 1px solid var(--accent-color);
}

.best-btn:hover {
    background: #444 !important;
}

/* -----------------------------------
   8. RESPONSIVENESS (MOBILE)
   ----------------------------------- */
@media (max-width: 768px) {
  .hero h1 {
    font-size: 40px;
  }
  .products-row {
    flex-direction: column; 
    align-items: center;
  }
  .product-card {
    width: 90%; 
    max-width: 350px;
  }
  .section-title {
      font-size: 24px;
      flex-direction: column;
      align-items: flex-start;
  }
  .flash-timer {
      font-size: 18px;
      margin-top: 10px;
  }
  .header {
    flex-direction: column;
    padding: 15px 10px;
  }
  .nav-links {
      margin-top: 10px;
  }
  .nav-links a {
      margin: 0 10px;
  }
  .dropdown {
      margin: 10px 0;
  }
}
</style>
</head>

<body>

<div class="header">
    <a href="#" class="logo">Brazil Express ‚öúÔ∏è</a>
    <div class="nav-links">
        <div class="dropdown">
            <button class="dropbtn">Categorias ‚¨áÔ∏è</button>
            <div class="dropdown-content">
                <a href="#">Esportes</a>
                <a href="#">Roupas de Inverno</a>
                <a href="#">Roupas de Ver√£o</a>
                <a href="#">Lingerie</a>
                <a href="#">Acess√≥rios</a>
                <a href="#">Bolsas</a>
                <a href="#">Cal√ßados</a>
            </div>
        </div>
        
        <a href="#flash-products">Ofertas Rel√¢mpago</a>
        <a href="#best-products">Mais Vendidos</a>
        <a href="#">Contato</a>
    </div>
</div>

<main class="container">

<div class="hero">
  <h1>As Melhores Ofertas do Brasil</h1>
  <p>Qualidade internacional com pre√ßos locais.</p>
</div>

<div class="section-title">
  üî• Promo√ß√µes Rel√¢mpago
  <span id="flash-timer" class="flash-timer"></span>
</div>
<div id="flash-products" class="products-row"></div>

<div class="section-title">‚≠ê Produtos Mais Vendidos</div>
<div id="best-products" class="products-row" style="flex-wrap:wrap;"></div>

</main>

<script>

// -------------------------------------
// 2. ÿ™ŸáŸäÿ¶ÿ© ÿπŸÖŸäŸÑ SUPABASE (ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™Ÿä ŸÇÿØŸÖÿ™Ÿáÿß)
// -------------------------------------
const SUPABASE_URL = 'https://sedmoddpmyzidqoubbxl.supabase.co';
// ŸÜÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿµÿ±Ÿëÿ≠ ÿ®Ÿá (Anon Key) ŸÑŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÇÿ±ÿßÿ°ÿ©
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlZG1vZGRwbXl6aWRxb3ViYnhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzOTQ3MTIsImV4cCI6MjA4MDk3MDcxMn0.Kz3Omw9qblhyZN1AMJuDxzFiVcpfv2WKNtvLOhRldtk';

const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);


// -------------------------------------
// 3. ÿØÿßŸÑÿ© ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ Ÿàÿπÿ±ÿ∂Ÿáÿß (Fetch & Render)
// -------------------------------------

/**
 * ÿØÿßŸÑÿ© ÿπÿßŸÖÿ© ŸÑÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÅŸä Ÿàÿßÿ¨Ÿáÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ.
 * @param {Array} productsArray - ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖÿ±ÿßÿØ ÿπÿ±ÿ∂Ÿáÿß.
 * @param {string} elementId - ID ÿπŸÜÿµÿ± ÿßŸÑŸÄ HTML ÿßŸÑÿ∞Ÿä ÿ≥Ÿäÿ≠ÿ™ŸàŸä ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™.
 * @param {boolean} isFlashSale - ŸáŸÑ ŸáŸä ÿπÿ±Ÿàÿ∂ ŸÖÿ§ŸÇÿ™ÿ© (ŸÑÿ™ÿ≠ÿØŸäÿØ ÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ≤ÿ±).
 */
function renderProducts(productsArray, elementId, isFlashSale) {
    const box = document.getElementById(elementId);
    if (!box) return; // ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿßŸÑÿπŸÜÿµÿ±

    box.innerHTML = ""; 

    productsArray.forEach(p => {
        // ŸÜÿ≥ÿ™ÿÆÿØŸÖ 'sale_price' Ÿà 'price' ŸÖŸÜ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
        const isDiscounted = p.sale_price && p.sale_price < p.price;
        const currentPrice = isDiscounted ? p.sale_price : p.price;
        
        box.innerHTML += `
            <div class="product-card">
              <img src="${p.image_url}">
              <h3>${p.name}</h3>
              <div class="price-details">
                ${isDiscounted ? `<span class="original-price">R$ ${p.price.toFixed(2)}</span>` : ''}
                <strong class="${isDiscounted ? 'discount-price' : 'regular-price'}">R$ ${currentPrice.toFixed(2)}</strong>
              </div>
              <a class="buy-btn ${!isFlashSale ? 'best-btn' : ''}" href="${p.buy_link}" target="_blank">
                ${isFlashSale ? 'Comprar Agora' : 'Ver Produto'}
              </a>
            </div>
        `;
    });
}


/**
 * ÿØÿßŸÑÿ© ŸÑÿ¨ŸÑÿ® ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ Supabase Ÿàÿ™ŸÇÿ≥ŸäŸÖŸáÿß Ÿàÿπÿ±ÿ∂Ÿáÿß.
 */
async function fetchAndShowProducts() {
    // 4. ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ ÿ¨ÿØŸàŸÑ 'products' Ÿàÿ™ÿ±ÿ™Ÿäÿ®Ÿáÿß ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ÿ≠ÿØÿ´
    const { data: products, error } = await supabase
        .from('products')
        .select('*')
        .order('created_at', { ascending: false });
    
    if (error) {
        console.error('Erro ao buscar produtos:', error);
        // ÿπÿ±ÿ∂ ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿ∑ÿ£ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
        document.getElementById('flash-products').innerHTML = '<p style="color:white; text-align:center;">Erro ao carregar os produtos. Verifique as credenciais do Supabase ou as pol√≠ticas RLS.</p>';
        return;
    }

    // ÿ™ŸÇÿ≥ŸäŸÖ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™:
    // 1. ÿπÿ±Ÿàÿ∂ ŸÖÿ§ŸÇÿ™ÿ©: ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ®Ÿáÿß sale_price ÿ£ŸÇŸÑ ŸÖŸÜ price
    const flashProducts = products.filter(p => p.sale_price && p.sale_price < p.price);
    
    // 2. ÿßŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã/ÿßŸÑÿπÿßÿØŸäÿ©: ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿÆŸÅŸäÿ∂ ÿ£Ÿà ÿ™ŸÑŸÉ ÿßŸÑÿ™Ÿä ŸÑÿß ÿ™ŸÜÿ∑ÿ®ŸÇ ÿπŸÑŸäŸáÿß ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿ™ÿÆŸÅŸäÿ∂
    const regularProducts = products.filter(p => !p.sale_price || p.sale_price >= p.price);
    
    // ÿπÿ±ÿ∂ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÅŸä ÿßŸÑÿ£ŸÇÿ≥ÿßŸÖ
    renderProducts(flashProducts, 'flash-products', true); 
    renderProducts(regularProducts.slice(0, 4), 'best-products', false); // ÿπÿ±ÿ∂ ÿ£ŸàŸÑ 4 ŸÅŸÇÿ∑ ŸÑŸÑÿ£ŸÉÿ´ÿ± ŸÖÿ®ŸäÿπÿßŸã
}


/* -------------------------------------
   FLASH COUNTDOWN TIMER (4H) - ÿ™ŸÖ ÿßŸÑÿ•ÿ®ŸÇÿßÿ° ÿπŸÑŸäŸá ŸÉŸÖÿß ŸáŸà
   ------------------------------------- */
function startFlashTimer() {
  let endTime = new Date().getTime() + (4 * 3600 * 1000); 

  const timerInterval = setInterval(() => {
    const now = new Date().getTime();
    const distance = endTime - now;

    const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const s = Math.floor((distance % (1000 * 60)) / 1000);

    const format = (n) => n < 10 ? '0' + n : n;

    const timerElement = document.getElementById("flash-timer");
    if (timerElement) {
        timerElement.innerText = `${format(h)}h : ${format(m)}m : ${format(s)}s`;
    }

    if (distance < 0) {
      clearInterval(timerInterval);
      if (timerElement) {
          timerElement.innerText = "OFERTA ENCERRADA";
      }
    }
  }, 1000);
}


// -------------------------------------
// ÿ®ÿØÿ° ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
// -------------------------------------
fetchAndShowProducts(); // Ÿäÿ®ÿØÿ£ ÿ¨ŸÑÿ® ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ŸÖŸÜ Supabase
startFlashTimer();

</script>

</body>
</html>
